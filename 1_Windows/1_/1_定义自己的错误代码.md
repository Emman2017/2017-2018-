# 对程序错误的处理

> Windows函数的错误处理过程直观操作

->	**检验参数有效性**

->	**设法执行任务**

->	**返回值** 【指出执行状态】

> 返回值类型概览

->	**VOID** : 众所周知，无返回

->	**BOOL** : 众所周知，**0**  or  **!0** 【一般考察!0而不是TRUE】

->	**HANDLE** : 失败则**NULL(0)** or  **INVILID_HANDLE_VALUE(-1)** 【具体哪个查看具体函数文档】

->	**PVOID** : 失败则**NULL**

->	**LONG/DWORD** : 函数无法进行计数时返回**0**  or  **-1** 【具体查看相关函数文档】

> 小插曲

微软公式编译了一个所有可能的错误代码的列表，并且为每个代码分配了一个**32位的号码**

> 深入系统内部

->	①Windows函数检查到一个错误

->	②使用本地线程存储器的机制 

->	③将相应的错误代码号码与调用线程关联起来

> 除了知道已经发生错误  还能获取错误的号码

->	**DWORD GetLastError();** 

->	返回线程的32位错误代码 【**WinError.h**中指出所有错误代码 、消息文本、错误代码的宏定义】

->	值得注意的是，一旦发送错误，应该立即调用GetLastError，否则调用另外一个Windows函数可能被改写

> 让我们来聊一聊Windows 98

16位代码  无法用GetLastError来获取

> 让我们初识一个错误代码格式化函数工具 

->	DWORD	FormatMessage();
